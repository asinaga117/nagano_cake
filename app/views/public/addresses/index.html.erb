<%= render "public/header" %>

<h2>配送先登録/一覧</h2>

<%= form_with model: @address, url: public_addresses_path, method: :post do |f| %>
  <div>
    <%= f.label :"郵便番号(ハイフンなし)" %>
    <%= f.text_field :postal_code %>
  </div>

  <div>
    <%= f.label :"住所" %>
    <%= f.text_field :address %>
  </div>

  <div>
    <%= f.label :"宛名" %>
    <%= f.text_field :name %>
  </div>
    <%= f.submit '登録する',class: "col-xs-2 pull-right btn-lg btn-success "   %>
<% end %>

  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th>郵便番号</th>
        <th>住所</th>
        <th>宛名</th>
        <th colspan="2"></th>
      </tr>
    </thead>
    
    <tbody>
    <% @addresses.each do |address| %>
    <tr id="destroy-<%= address.id %>">
      <td>
        <%= address.postal_code %>
      </td>
      <td>
        <%= address.address %>
      </td>
      <td>
        <%= address.name %>
      </td>
      <td>
        <%= link_to "編集する",edit_public_address_path(address) %>
      </td>
      <td>
        <%= link_to "削除する", public_address_path(address), method: :delete, data: {confirm: "本当に削除してもよろしいですか？"}, remote: true %>
      </td>
    </tr>
    <% end %>
    </tbody>
  </table>